<!DOCTYPE html>
<head>
	
</head>
<body>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script>
	
	function multiCsv(files, callback) {
	  var results = [];
	  var error = "";
	  var filesLength = (files || []).length;
	  var callbackInvoked = false;
	  for (var i = 0; i < filesLength; i++) {
		(function(url) {
		  d3.csv(url, function(data) {
			if (data === null) {
			  error += "Error retrieving \"" + url + "\"\n";
			} else {
			  results.push(data);
			}
			// all files retrieved or an error occurred
			if (!callbackInvoked && (error || results.length === filesLength)) {
			  if (error) {
				callback(error, null); // might want to send partial results here
			  } else {
				callback(null, d3.merge(results));
			  }
			  callbackInvoked = true;
			}
		  });
		})(files[i]);
	  }
	}
	var infiles = [
		"/FE550/chess_top_100/fide.table.217.csv",
		"/FE550/chess_top_100/fide.table.221.csv",
		"/FE550/chess_top_100/fide.table.225.csv",
		"/FE550/chess_top_100/fide.table.229.csv",
		"/FE550/chess_top_100/fide.table.233.csv",
		"/FE550/chess_top_100/fide.table.237.csv",
		"/FE550/chess_top_100/fide.table.241.csv",
		"/FE550/chess_top_100/fide.table.245.csv",
		"/FE550/chess_top_100/fide.table.249.csv",
		"/FE550/chess_top_100/fide.table.253.csv",
		"/FE550/chess_top_100/fide.table.257.csv",
		"/FE550/chess_top_100/fide.table.261.csv",
		"/FE550/chess_top_100/fide.table.265.csv",
		"/FE550/chess_top_100/fide.table.269.csv",
		"/FE550/chess_top_100/fide.table.273.csv",
		"/FE550/chess_top_100/fide.table.277.csv",
		"/FE550/chess_top_100/fide.table.281.csv",
		"/FE550/chess_top_100/fide.table.285.csv",
		"/FE550/chess_top_100/fide.table.289.csv",
		"/FE550/chess_top_100/fide.table.293.csv",
		"/FE550/chess_top_100/fide.table.297.csv",
		"/FE550/chess_top_100/fide.table.301.csv",
		"/FE550/chess_top_100/fide.table.305.csv",
		"/FE550/chess_top_100/fide.table.309.csv",
		"/FE550/chess_top_100/fide.table.313.csv",
		"/FE550/chess_top_100/fide.table.317.csv",
		"/FE550/chess_top_100/fide.table.321.csv",
		"/FE550/chess_top_100/fide.table.325.csv",
		"/FE550/chess_top_100/fide.table.329.csv",
		"/FE550/chess_top_100/fide.table.333.csv",
		"/FE550/chess_top_100/fide.table.337.csv",
		"/FE550/chess_top_100/fide.table.341.csv",
		"/FE550/chess_top_100/fide.table.345.csv",
		"/FE550/chess_top_100/fide.table.349.csv",
		"/FE550/chess_top_100/fide.table.353.csv",
		"/FE550/chess_top_100/fide.table.357.csv",
		"/FE550/chess_top_100/fide.table.361.csv",
		"/FE550/chess_top_100/fide.table.365.csv",
		"/FE550/chess_top_100/fide.table.369.csv",
		"/FE550/chess_top_100/fide.table.373.csv",
		"/FE550/chess_top_100/fide.table.377.csv",
		"/FE550/chess_top_100/fide.table.381.csv",
		"/FE550/chess_top_100/fide.table.385.csv",
		"/FE550/chess_top_100/fide.table.389.csv",
		"/FE550/chess_top_100/fide.table.393.csv",
		"/FE550/chess_top_100/fide.table.397.csv"]
		
	

var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);

var y = d3.scale.linear().range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(d3.time.format("%Y-%m"));

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .ticks(10);

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");

    
	multiCsv(infiles, function (err, results) {
	  if (err) {
		alert(err);
		return;
	  }
		x.domain(results.map(function(d) { return d.Country; }));
		y.domain([0, d3.count(results, function(d) { return d.Name; })]);
	
	
	svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .selectAll("text")
      .style("text-anchor", "end")
      .attr("dx", "-.8em")
      .attr("dy", "-.55em")
      .attr("transform", "rotate(-90)" );

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Value ($)");

  svg.selectAll("bar")
      .data(data)
    .enter().append("rect")
      .style("fill", "steelblue")
      .attr("x", function(d) { return x(d.date); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height - y(d.value); });

});
	
	</script>
	
	<h1>Chess Champions of the World</h1>
	
	<p>  Being an avid chess player I thought this data set was pretty interesting.  It is a small set from July 2012 to April 2017.  I found this on kaggle - https://www.kaggle.com/odartey/top-100-chess-players-july-2012-april-2016. <br> Here is my analysis</p>
	
	<h3>Research Questions</h3>
	<ol>
		<li>Is there a particular country that seems to generate more champions?
		<li>Are there any disparities in Age between lowest ranked players and highest ranked players?
		<li>How many games do the top ranked players typically play?
	</ol>
	
	
	